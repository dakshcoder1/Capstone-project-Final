<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>History</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />

</head>

<body>
  <div class="app-shell">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="brand">
        <div class="brand-badge"><i class="bi bi-stars"></i></div>
        <div>
          <h1>Micro Tools Studio</h1>
          <p>Minimal UI • Beginner friendly</p>
        </div>
      </div>

      <div class="nav-title">Tools</div>
      <div class="tool-list">
        <a class="tool-item" href="index.html">
          <div class="tool-icon"><i class="bi bi-grid-1x2"></i></div>
          <div class="tool-meta">
            <p class="tool-name">Dashboard</p>
            <p class="tool-desc">Quick access to all tools</p>
          </div>
        </a>


         <a class="tool-item" href="tool-prompt-enhancer.html">
  <div class="tool-icon">
    <i class="bi bi-cpu"></i>
  </div>
  <div class="tool-meta">
    <p class="tool-name">Prompt Enhancer</p>
    <p class="tool-desc">Enhance your prompts</p>
  </div>
</a>

        <a class="tool-item" href="tool-prompt-to-image.html">
          <div class="tool-icon"><i class="bi bi-magic"></i></div>
          <div class="tool-meta">
            <p class="tool-name">Prompt → Image</p>
            <p class="tool-desc">Text prompt to image</p>
          </div>
        </a>
        
       

        <a class="tool-item" href="tool-image-to-style.html">
          <div class="tool-icon"><i class="bi bi-palette2"></i></div>
          <div class="tool-meta">
            <p class="tool-name">Image → Style</p>
            <p class="tool-desc">Apply a style to an image</p>
          </div>
        </a>

        <a class="tool-item" href="tool-specs-tryon.html">
          <div class="tool-icon"><i class="bi bi-eyeglasses"></i></div>
          <div class="tool-meta">
            <p class="tool-name">Specs Try-On</p>
            <p class="tool-desc">Face + Specs overlay</p>
          </div>
        </a>

        <a class="tool-item" href="tool-haircut-preview.html">
          <div class="tool-icon"><i class="bi bi-scissors"></i></div>
          <div class="tool-meta">
            <p class="tool-name">Haircut Preview</p>
            <p class="tool-desc">Face + Hair style sample</p>
          </div>
        </a>


        <a class="tool-item" href="tool-insta-post-generator.html">
          <div class="tool-icon"><i class="bi bi-plus-square"></i></i></div>
          <div class="tool-meta">
            <p class="tool-name">Insta Post Generator</p>
            <p class="tool-desc">Ready Insta Post</p>
          </div>
        </a>
        <a class="tool-item" href="tool-insta-Story-Template.html">
          <div class="tool-icon"><i class="bi bi-phone"></i></i></div>
          <div class="tool-meta">
            <p class="tool-name">Insta Story Template</p>
            <p class="tool-desc">Get Insta Story</p>
          </div>
        </a>
        <a class="tool-item" href="tool-healthy-poster-analayser.html">
          <div class="tool-icon"><i class="bi bi-person-check"></i></i></div>
          <div class="tool-meta">
            <p class="tool-name">Healthy-Poster-Analayser</p>
            <p class="tool-desc">Get Insta Story</p>
          </div>
        </a>
        <a class="tool-item" href="tool-safety-gear.html">
          <div class="tool-icon"><i class="bi bi-shield-check"></i></i></div>
          <div class="tool-meta">
            <p class="tool-name">Safety Gear Try-On</p>
            <p class="tool-desc">Get Safety Gear Try</p>
          </div>
        </a>
        <a class="tool-item" href="tool-story-image-generater.html">
          <div class="tool-icon"><i class="bi bi-journal-richtext"></i></i></div>
          <div class="tool-meta">
            <p class="tool-name">Story-Image Generater</p>
            <p class="tool-desc">get the story in Image</p>
          </div>
        </a>


        <a class="tool-item active" href="history.html">
          <div class="tool-icon"><i class="bi bi-clock-history"></i></div>
          <div class="tool-meta">
            <p class="tool-name">History</p>
            <p class="tool-desc">All previous requests</p>
          </div>
        </a>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <div class="topbar">
        <div>
          <p class="page-title">History</p>
          <p class="page-subtitle">This is static UI now. Later you’ll load real data from Python backend.</p>
        </div>
        <div class="d-flex gap-2">
          <a class="btn btn-elegant" href="index.html"><i class="bi bi-arrow-left me-1"></i>Back</a>
        </div>
      </div>

      <div class="panel">
        <div class="panel-header">
          <h3><i class="bi bi-clock-history me-2"></i>Previous Requests</h3>
        </div>
        <div class="panel-body">
          <div class="row g-3 mb-3">
            <div class="col-md-6">
              <label class="form-label">Search</label>
              <input class="form-control" placeholder="Search (later connect with JS/backend)">
            </div>
            <div class="col-md-6">
              <label class="form-label">Filter by Tool</label>
              <select class="form-select">
                <option selected>All</option>
                <option>Prompt → Image</option>
                <option>Image → Style</option>
                <option>Specs Try-On</option>
                <option>Haircut Preview</option>
                <option>Insta Post Generater</option>
                <option>Insta Story Template</option>
                <option>Healthy Poster Analayser</option>
                <option>Safety Gear Try On</option>
                <option>Story Image Generater</option>
              </select>
            </div>
          </div>
          




          
          <div class="container mt-4">
  <h3 class="mb-3">Tool History</h3>

  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Tool</th>
        <th>Input Text</th>
        <th>Input Image</th>
        <th>Output Text</th>
        <th>Output Image</th>
      </tr>
    </thead>
    <tbody id="historyTableBody">
      <tr>
        <td colspan="6" class="text-center">Loading...</td>
      </tr>
    </tbody>
  </table>
</div>

        

<div class="history-card">
  <h4><i class="bi bi-cpu" style="color: var(--c-story);"></i>prompt Enhancer</h4>
  <p>Short text get the Enhanced text</p>
  <p class="hint m-0">Time: 5 hours ago • Status: <span class="badge bg-warning-subtle text-warning">Processing</span></p>
</div>  
          
          
          
          <div class="history-card">
  <h4><i class="bi bi-magic" style="color: var(--c-prompt);"></i>Prompt → Image</h4>
  <p>Prompt: "Neon Mumbai street, cinematic lighting</p>
  <p class="hint m-10">Time: 2 minutes ago • Status: <span class="badge bg-success-subtle text-success">Done</span></p>
</div>



          <div class="history-card">
  <h4><i class="bi bi-palette2" style="color: var(--c-prompt);"></i>Image → Style</h4>
  <p>Image: selfie.jpg • Style: Watercolor</p>
  <p class="hint m-10">Time: Today •  Status: <span class="badge bg-success-subtle text-success">Done</span></p>
</div>
          <div class="history-card">
  <h4><i class="bi bi-eyeglasses" style="color: var(--c-prompt);"></i>Specs Try-On</h4>
  <p>Face: face.png • Specs: aviator_frame.png</p>
  <p class="hint m-10">Time: 2 min ago •  Status: <span class="badge bg-success-subtle text-success">Done</span></p>
</div>
          <div class="history-card">
  <h4><i class="bi bi-scissors" style="color: var(--c-prompt);"></i>Haircut Preview</h4>
  <p>Your Photo: me.jpg • Sample: fade_cut.jpg</p>
  <p class="hint m-10">Time: last Week •  Status: <span class="badge bg-success-subtle text-success">Done</span></p>
</div>
          <div class="history-card">
  <h4><i class="bi bi-plus-square me-2" style="color: var(--c-insta);"></i>Insta Post Generator</h4>
  <p>Theme: "Minimalist Coffee Branding" • Palette: Vibrant Neon</p>
  <p class="hint m-10">Time: 15 minutes ago • Status: <span class="badge bg-success-subtle text-success">Done</span></p>
</div>

<div class="history-card">
  <h4><i class="bi bi-phone me-2" style="color: var(--c-insta);"></i>Insta Story Template</h4>
  <p>Layout: Cinematic • Headline: "Summer Vibes 2026"</p>
  <p class="hint m-0">Time: 1 hour ago • Status: <span class="badge bg-success-subtle text-success">Done</span></p>
</div>

<div class="history-card">
  <h4><i class="bi bi-person-check me-2" style="color: var(--c-posture);"></i>Healthy Posture Analyzer</h4>
  <p>Scan Type: Real-time Feed • Spine Alignment: 92% (Optimal)</p>
  <p class="hint m-0">Time: 3 hours ago • Status: <span class="badge bg-success-subtle text-success">Done</span></p>
</div>


<div class="history-card">
  <p>Person: user_portrait.jpg • Gear: Industrial Helmet & Vest</p>
  <h4><i class="bi bi-shield-check me-2" style="color: var(--c-safety);"></i>Safety Gear Try-On</h4>
  <p class="hint m-0">Time: Yesterday • Status: <span class="badge bg-success-subtle text-success">Done</span></p>
</div>



<div class="history-card">
  <h4><i class="bi bi-journal-richtext me-2" style="color: var(--c-story);"></i>Story Image Generator</h4>
  <p>Narrative: "Cyberpunk street in the rain" • Ratio: 16:9</p>
  <p class="hint m-0">Time: 5 hours ago • Status: <span class="badge bg-warning-subtle text-warning">Processing</span></p>
</div>

        </div>
      </div>

    </main>
  </div>
<script>
const token = localStorage.getItem("token");

fetch("http://127.0.0.1:5000/api/history", {
  method: "GET",
  headers: {
    "Authorization": `Bearer ${token}`,
    "Content-Type": "application/json"
  }
})
.then(res => {
  if (!res.ok) {
    throw new Error("Unauthorized or failed to fetch history");
  }
  return res.json();
})
.then(data => {
  const tbody = document.getElementById("historyTableBody");
  tbody.innerHTML = "";

  if (!data.length) {
    tbody.innerHTML = `
      <tr>
        <td colspan="6" class="text-center">No history found</td>
      </tr>`;
    return;
  }

  data.forEach(item => {
    tbody.innerHTML += `
      <tr>
        <td>${item.id}</td>
        <td>${item.tool_name}</td>
        <td>${item.input_text || "—"}</td>

        <td>
          ${
            item.input_img
              ? item.input_img.split(",").map(img => `
                  <img 
                    src="http://127.0.0.1:5000/generated/${img.trim()}" 
                    width="60"
                    class="me-1 mb-1"
                    onerror="this.style.display='none'">
                `).join("")
              : "—"
          }
        </td>

        <td style="white-space: pre-wrap">
          ${item.output_text || "—"}
        </td>

        <td>
          ${
            item.output_img
              ? `<img src="http://127.0.0.1:5000/generated/${item.output_img}"
                      width="80"
                      onerror="this.style.display='none'">`
              : "—"
          }
        </td>
      </tr>
    `;
  });
})
.catch(err => {
  console.error("History error:", err);
});
</script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
